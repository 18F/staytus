= form_for [:admin, @service] do |f|
  = f.error_messages
  .fieldSet.u-margin-2x
    %dl.fieldSet__field.u-margin
      %dt.fieldSet__label= f.label :name
      %dt.fieldSet__input= f.text_field :name, :class => 'textInput', :autofocus => @service.new_record?, :required => true
    %dl.fieldSet__field.u-margin
      %dt.fieldSet__label= f.label :permalink
      %dt.fieldSet__input= f.text_field :permalink, :class => 'textInput', :required => true
    %dl.fieldSet__field.u-margin
      %dt.fieldSet__label= f.label :status_id, "Current Status"
      %dt.fieldSet__input
        .fieldSet__selectContainer
          = f.collection_select :status_id, ServiceStatus.all, :id, :name

    %dl.fieldSet__field
      %dt.fieldSet__label= f.label :location_ids, "Locations"
      %dd.fieldSet__input
        = hidden_field_tag 'service[location_ids][]', nil
        %ul.fieldSet__checkboxList
          - for location in Location.ordered
            %li
              = check_box_tag 'service[location_ids][]', location.id, @service.locations.include?(location), :id => "location_#{location.id}"
              = label_tag "location_#{location.id}", location.name

  .formButtons
    - unless @service.new_record?
      .formButtons__secondary= link_to "Delete Service", [:admin, @service], :class => 'button button--grey button--solid', :method => :delete, :data => {:confirm => "Are you sure you wish to delete #{@service.name}?"}
    = f.submit "Save Service", :class => 'button button--solid'
    = link_to "Cancel", admin_services_path, :class => 'button button--lightGrey'
